# 隐私与政策（国内版）

**适用环境**：`NEXT_PUBLIC_DEFAULT_LANGUAGE=zh`

**合规法规**：《中华人民共和国个人信息保护法》(PIPL)、《网络安全法》、《数据安全法》

**生效日期**：202X年X月X日

**更新日期**：202X年X月X日

---

MornGPT（以下简称"我们"）非常重视您的隐私。本政策适用于您通过 Android、iOS、Windows、Mac 客户端及网页端使用我们的产品与服务。

---

## 一、我们如何收集和使用您的信息

### 1.1 账号注册与登录

#### 1.1.1 邮箱登录
当您使用邮箱注册或登录时，我们将收集以下信息：
- **电子邮箱地址**：用于账号注册、登录验证及账户找回
- **加密密码**：使用 bcrypt 算法（salt rounds: 10）单向加密存储，我们无法获取您的明文密码

#### 1.1.2 微信登录
当您使用微信扫码登录时，我们将通过微信开放平台收集以下信息：
- **微信 OpenID**：您在本应用中的唯一标识符
- **微信 UnionID**（如有）：用于同一开放平台账号下的多应用关联
- **微信昵称**：用于展示您的用户名称
- **微信头像**：用于展示您的用户头像

> **法律依据**：收集上述信息是为了履行与您的合同（提供服务），符合《个人信息保护法》第十三条第二款的规定。

### 1.2 核心业务功能与AI模型交互

#### 1.2.1 普通AI对话
您与普通AI模型的对话将按以下方式处理：
- 对话内容将发送至第三方模型服务商API（如阿里云通义千问 Qwen、DeepSeek、月之暗面 Kimi、智谱 GLM 等）进行推理处理
- **我们不会在服务器端长期保留您的聊天内容用于模型训练**
- 对话记录仅在您登录状态下保存至您的账户，用于历史记录查看和会话恢复
- 游客用户的对话记录不会被保存

#### 1.2.2 专家模型服务（特殊条款）

> **重要提示**：我们的服务包含 **17 个特定的专家模型**。当您选择使用这些专家模型时，即表示您**明确同意我们收集并存储该次对话的完整记录**（包括用户输入与AI输出）。

**17个专家模型包括**：

| 编号 | 专家模型名称 | 数据存储说明 |
|:---:|-------------|-------------|
| 1 | Growth Advisory（增长顾问） | 存储对话记录用于优化商业建议 |
| 2 | Interview/Job（面试求职） | 存储对话记录用于优化职业指导 |
| 3 | AI Coder（编程助手） | 存储对话记录用于优化代码建议 |
| 4 | Content Detection（内容检测） | 存储对话记录用于优化检测能力 |
| 5 | Medical Advice（医疗建议） | 存储对话记录用于优化健康建议 |
| 6 | Multi-GPT（多模型协作） | 存储对话记录用于优化协作效果 |
| 7 | AI Lawyer（法律顾问） | 存储对话记录用于优化法律咨询 |
| 8 | Entertainment Advisor（娱乐顾问） | 存储对话记录用于优化推荐系统 |
| 9 | Housing（房产顾问） | 存储对话记录用于优化房产建议 |
| 10 | Person Matching（人员匹配） | 存储对话记录用于优化匹配算法 |
| 11 | AI Teacher（AI教师） | 存储对话记录用于优化教学效果 |
| 12 | Travel Planning（旅行规划） | 存储对话记录用于优化行程建议 |
| 13 | Product Search（产品搜索） | 存储对话记录用于优化搜索结果 |
| 14 | Fashion（时尚顾问） | 存储对话记录用于优化穿搭建议 |
| 15 | Food & Dining（美食顾问） | 存储对话记录用于优化餐饮推荐 |
| 16 | Content Generation（内容生成） | 存储对话记录用于优化生成质量 |
| 17 | AI Protection（AI保护） | 存储对话记录用于优化安全建议 |

**数据使用目的**：
- 优化特定领域的模型表现
- 专家系统的上下文关联分析
- 改进个性化服务质量

**法律依据**：您使用专家模型的行为构成明确同意（《个人信息保护法》第十三条第一款）。

### 1.3 多模态内容处理

#### 1.3.1 图片上传
- 上传的图片将发送至多模态模型（如 `qwen3-omni-flash`）进行分析
- 图片存储于云端存储服务（腾讯云 CloudBase）
- **图片仅用于AI分析和您的历史记录查看，不会用于其他商业用途**
- 支持格式：PNG、JPEG、GIF、WebP（单文件最大 100MB）

#### 1.3.2 视频上传
- 上传的视频将用于多模态内容理解
- 视频存储于云端存储服务
- **视频仅用于AI分析和您的历史记录查看，不会用于其他商业用途**
- 支持格式：MP4、MPEG（单文件最大 100MB）

#### 1.3.3 音频上传
- 上传的音频将用于语音识别和内容理解
- 音频存储于云端存储服务
- **音频仅用于AI分析和您的历史记录查看，不会用于其他商业用途**
- 支持格式：MPEG、WAV（单文件最大 100MB）

**文件上传限制**：
- 单次最多上传 10 个文件
- 单个文件最大 100MB
- 总大小不超过 500MB
- 同一次只能上传同类型文件（图片、视频或音频，不可混合）

---

## 二、设备权限调用

为了提供特定功能，我们可能会请求以下敏感权限。**所有权限均需您主动触发才会调用，我们不会在后台私自获取**。

### 2.1 麦克风权限
- **触发方式**：点击输入区域的「语音输入」按钮或「Pro语音对话」按钮
- **用途**：
  - 语音输入：将您的语音转换为文字输入
  - Pro语音对话：实时语音对话功能
- **数据处理**：语音数据将通过浏览器 Web Speech API 或上传至语音识别服务进行处理

### 2.2 摄像头权限
- **触发方式**：点击输入区域的「相机」按钮
- **用途**：
  - 拍照模式：拍摄照片用于AI分析
  - 录像模式：录制视频用于AI分析
  - Pro视频对话：实时视频对话功能
- **数据处理**：拍摄/录制的内容将作为附件发送给AI进行分析

### 2.3 地理位置权限
- **触发方式**：点击输入区域的「位置」按钮
- **用途**：获取您的当前位置，用于通过AI生成基于位置的服务建议
- **数据处理**：
  - 位置信息将附加到您的消息中发送给AI
  - **我们不会长期存储您的位置信息**
  - 您可以随时点击清除位置信息

### 2.4 存储权限
- **用途**：将AI生成的图片、视频、音频保存至本地设备
- **承诺**：我们不会读取您设备上的其他文件

---

## 三、订阅规则与虚拟资产

### 3.1 订阅套餐

| 套餐 | 月付价格 | 年付价格(月均) | 每日外部模型调用 | 月图片额度 | 月视频/音频额度 |
|:---:|:-------:|:------------:|:-------------:|:--------:|:-------------:|
| Free | 免费 | - | 10次 | 30次 | 5次 |
| Basic(基础版) | ￥29.90 | ￥20.90 | 50次 | 100次 | 20次 |
| Pro(专业版) | ￥99.90 | ￥69.90 | 200次 | 500次 | 100次 |
| Enterprise(企业版) | ￥199.90 | ￥139.90 | 2000次 | 1500次 | 200次 |

> **说明**：General Model（通用模型，国内版使用 qwen-turbo）对所有用户无限制使用，不消耗每日调用次数。

### 3.2 订阅计算规则

#### 3.2.1 同级续费（续订相同套餐）
```typescript
// 计算逻辑（基于 services/wallet.ts）
// 续订相同套餐时，有效期自动顺延
function extendSubscription(currentExpDate: Date, period: 'monthly' | 'annual'): Date {
  const monthsToAdd = period === 'annual' ? 12 : 1;
  // 使用 addCalendarMonths 函数，支持月末粘性（如1月31日续费月付，到期为2月28日）
  return addCalendarMonths(currentExpDate, monthsToAdd, anchorDay);
}
```

#### 3.2.2 升级订阅（从低级升至高级）
```typescript
// 计算逻辑（基于 app/api/payment/stripe/webhook/route.ts）
// 1. 计算当前低级套餐剩余天数
const remainingDays = Math.ceil((currentPlanExp - now) / (24 * 60 * 60 * 1000));

// 2. 计算剩余价值
const dailyValue = currentPlanPrice / 30;  // 按月计算每日价值
const remainingValue = remainingDays * dailyValue;

// 3. 抵扣后计算新套餐天数
const newPlanDailyValue = newPlanPrice / 30;
const convertedDays = Math.floor(remainingValue / newPlanDailyValue);

// 4. 新套餐到期日 = 今天 + 折算天数 + 新购买周期天数
const newExpDate = new Date(now.getTime() + (convertedDays + purchasedDays) * 24 * 60 * 60 * 1000);

// 5. 升级立即生效
// 6. 额度处理：
//    - 如果折算后天数不满一个自然月，不刷新月度图片/视频额度
//    - 使用 upgradeSupabaseMonthlyQuota 函数重置额度上限
```

#### 3.2.3 降级订阅（从高级降至低级）
```typescript
// 计算逻辑（基于 services/wallet-supabase.ts）
// 降级订阅将在当前高级订阅周期结束后的次日生效

// 1. 记录待降级信息
const pendingDowngrade = {
  targetPlan: newLowerPlan,           // 目标低级套餐
  effectiveAt: currentPlanExp.toISOString()  // 生效时间：当前套餐到期日
};

// 2. 写入 subscriptions 表，状态为 'pending'
await supabaseAdmin.from("subscriptions").upsert({
  user_id: userId,
  plan: newLowerPlan,
  status: "pending",  // 待生效
  started_at: currentPlanExp.toISOString(),  // 从当前套餐到期开始
  expires_at: newPlanExpDate.toISOString()   // 低级套餐到期时间
});

// 3. 更新 user_wallets 表的 pending_downgrade 字段
await supabaseAdmin.from("user_wallets").update({
  pending_downgrade: JSON.stringify(pendingDowngrade)
}).eq("user_id", userId);

// 4. 到期自动激活（在 applyPendingDowngradeIfNeeded 函数中处理）
// - 检测当前时间是否超过 effectiveAt
// - 激活新套餐，重置为新套餐的额度上限
// - 清除 pending_downgrade 字段
```

### 3.3 额度刷新机制

#### 3.3.1 每日外部模型调用
```typescript
// 刷新逻辑（基于 utils/model-limits.ts）
// 每日北京时间 00:00 刷新
function getTodayString(): string {
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset() * 60000;
  const beijing = new Date(utc + 8 * 3600000);  // 转换为北京时间
  return beijing.toISOString().split("T")[0];  // 返回 YYYY-MM-DD
}

// 检测是否需要重置
if (wallet.daily_external_day !== getTodayString()) {
  // 重置每日已用次数为 0
  wallet.daily_external_used = 0;
  wallet.daily_external_day = getTodayString();
}
```

#### 3.3.2 月度多模态配额（图片/视频/音频）
```typescript
// 刷新逻辑（基于 services/wallet-supabase.ts）
// 按账单日刷新，支持月末粘性

function shouldResetMonthlyQuota(wallet: UserWallet): boolean {
  const now = new Date();
  const resetAt = wallet.monthly_reset_at ? new Date(wallet.monthly_reset_at) : null;

  if (!resetAt) return true;  // 从未重置过，需要重置

  // 检查是否已过月度重置日期
  return now >= resetAt;
}

// 月度重置计算
function getNextMonthlyResetDate(currentResetAt: Date, anchorDay: number): Date {
  // 使用 addCalendarMonths 函数
  // anchorDay: 账单锚点日（如1日、15日、月末）
  // 支持月末粘性：如果锚点日是31号，2月会自动调整为28/29号
  return addCalendarMonths(currentResetAt, 1, anchorDay);
}
```

### 3.4 加油包（额外额度）

| 档位 | 价格 | 图片额度 | 视频/音频额度 | 有效期 |
|:---:|:---:|:------:|:-----------:|:-----:|
| Starter | ￥9.9 | 30次 | 5次 | 永久 |
| Standard | ￥29.9 | 100次 | 20次 | 永久 |
| Premium | ￥69.9 | 300次 | 60次 | 永久 |

**扣费策略**：FEFO（先过期先扣）
```typescript
// 扣费逻辑（基于 services/wallet.ts）
async function deductQuota(userId: string, imageCount: number, videoAudioCount: number) {
  const wallet = await fetchWallet(userId);

  // 1. 先扣月度配额（会过期）
  const monthlyImageDeduct = Math.min(imageCount, wallet.monthly_image_balance);
  const remainingImage = imageCount - monthlyImageDeduct;

  // 2. 再扣加油包配额（永久）
  const addonImageDeduct = Math.min(remainingImage, wallet.addon_image_balance);

  // 更新钱包
  await updateWallet(userId, {
    monthly_image_balance: wallet.monthly_image_balance - monthlyImageDeduct,
    addon_image_balance: wallet.addon_image_balance - addonImageDeduct,
    // ... 视频/音频同理
  });
}
```

---

## 四、支付与隐私

### 4.1 支持的支付方式

#### 4.1.1 支付宝 (Alipay)
- **收集信息**：订单号、支付时间、支付金额
- **不收集信息**：我们不会获取您的支付宝账号、银行卡信息或支付密码
- **数据传输**：通过支付宝官方SDK与支付宝服务器直接通信
- **隐私政策**：请参阅[支付宝隐私政策](https://render.alipay.com/p/yuyan/180020010001196791/preview.html)

#### 4.1.2 微信支付 (WeChat Pay)
- **收集信息**：订单号、支付时间、支付金额
- **不收集信息**：我们不会获取您的微信支付账号、银行卡信息或支付密码
- **数据传输**：通过微信支付 V3 API 与微信支付服务器直接通信
- **隐私政策**：请参阅[微信支付隐私政策](https://pay.weixin.qq.com/wiki/doc/apiv3/index.shtml)

### 4.2 交易记录保留
我们将保留以下交易信息用于售后服务和财务合规：
- 订单唯一标识符
- 支付提供商订单号
- 支付金额和货币类型
- 支付状态和完成时间
- 购买的产品类型（订阅/加油包）

---

## 五、广告与第三方服务

### 5.1 广告展示规则
- **广告位置**：顶部、底部、左侧、右侧、侧边栏、左下角、右下角
- **广告类型**：图片广告、视频广告
- **广告管理**：您可以在设置中选择是否显示广告

### 5.2 订阅用户去广告权益
- Basic/Pro/Enterprise 订阅用户可以在设置中开启「隐藏广告」功能
- 开启后，应用内将不再展示任何广告

### 5.3 广告数据收集
- 我们的广告系统由自有服务器管理
- **我们不会向第三方广告商共享您的个人信息**
- 广告展示基于位置参数，不基于您的个人画像

---

## 六、内容规范与合规

### 6.1 AI生成内容免责声明
> **重要提示**：AI 生成的所有内容（包括文本、图片、代码等）仅供参考，不构成专业的医疗、法律、投资或其他领域的建议。使用AI生成内容产生的任何后果由用户自行承担。

### 6.2 外部模型API说明
- 本应用接入多个第三方AI模型API（阿里云通义千问、DeepSeek、月之暗面Kimi、智谱GLM等）
- 这些外部API的数据处理遵循各服务商的隐私政策
- **普通对话模式下，外部API服务商不会将您的对话用于模型训练**（具体请参阅各服务商隐私政策）

### 6.3 禁止违规信息
请勿向AI发送或诱导AI生成以下内容：
- 违反中华人民共和国法律法规的内容
- 色情、暴力、血腥内容
- 政治敏感信息
- 侵犯他人合法权益的内容
- 其他违反公序良俗的内容

**处理措施**：
- 系统会自动拦截违规关键词
- 多次违规将导致账号封禁
- 我们保留依法向有关部门报告违法行为的权利

---

## 七、聊天记录管理

### 7.1 聊天记录存储
- **登录用户**：聊天记录保存在云端数据库中，可跨设备同步
- **游客用户**：聊天记录仅保存在本地浏览器中，关闭后可能丢失

### 7.2 聊天记录与专家模型的区别
| 对比项 | 普通聊天记录 | 专家模型对话 |
|:-----:|:----------:|:----------:|
| 存储目的 | 供用户查看历史 | 用于模型优化 |
| 数据使用 | 不用于训练 | 可能用于分析 |
| 删除权利 | 可删除 | 需联系客服 |

### 7.3 上下文消息限制
为保证服务质量，不同套餐的上下文消息数量有所限制：
- Free: 最近 10 条消息
- Basic: 最近 50 条消息
- Pro: 最近 100 条消息
- Enterprise: 最近 200 条消息

> 超出限制的历史消息仍保留在数据库中，但不会发送给AI作为上下文。

---

## 八、客户端下载

### 8.1 支持的平台
- **Android**：APK 直接下载安装
- **iOS**：App Store 下载
- **Windows**：EXE 安装包下载
- **Mac**：DMG 安装包下载

### 8.2 下载安全
- 所有下载链接均由官方服务器提供
- 安装包经过数字签名验证
- 请勿从非官方渠道下载，以防安全风险

### 8.3 应用权限说明（客户端）
不同平台的客户端可能请求以下权限：
- **网络访问**：用于与服务器通信
- **存储权限**：用于保存生成的文件
- **麦克风权限**：用于语音输入功能
- **摄像头权限**：用于拍照/录像功能
- **位置权限**：用于获取位置信息（可选）

---

## 九、账户删除

### 9.1 删除入口
设置 → 隐私与安全 → 危险操作 → 删除账户

### 9.2 删除警告
> **危险警告**：删除账户是**不可恢复**的操作。一旦删除，以下数据将被永久清除且无法找回：
> - 账户基本信息（邮箱、昵称、头像）
> - 所有聊天记录和对话历史
> - 书签和自定义提示词
> - **剩余的订阅时长将被作废，不予退款**
> - **剩余的加油包额度将被清空，不予退款**
> - 个人设置和偏好配置
> - 所有上传的图片、视频、音频文件

### 9.3 删除流程
1. 进入「隐私与安全」设置
2. 点击「删除账户」按钮
3. 系统弹出确认对话框，明确告知不可恢复
4. 确认后立即执行删除
5. 删除完成后自动退出登录

---

## 十、您的权利

### 10.1 访问权
您有权访问我们收集的关于您的个人信息。

### 10.2 更正权
您有权更正您的个人信息（如昵称、头像等）。

### 10.3 删除权
您有权要求我们删除您的个人信息（参见第九章）。

### 10.4 导出权
您可以在「隐私与安全」设置中导出您的个人数据。

### 10.5 撤回同意权
您可以随时撤回对非必要权限的授权（如位置权限）。

---

## 十一、未成年人保护

本服务不面向 14 周岁以下的儿童。如果您是未成年人的监护人，发现您的孩子向我们提供了个人信息，请联系我们删除。

---

## 十二、隐私政策更新

我们可能会不时更新本隐私政策。更新后的政策将在本页面发布，重大变更将通过应用内通知或电子邮件告知您。

---

## 十三、联系我们

如果您对本隐私政策有任何疑问或建议，请通过以下方式联系我们：

- **邮箱**：[请填写联系邮箱]
- **地址**：[请填写公司地址]

---

**Copyright © 2025 Yuxuan Zhou. All Rights Reserved.**
